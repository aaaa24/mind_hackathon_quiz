
# üß† Quiz ‚Äî –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –æ–Ω–ª–∞–π–Ω-–≤–∏–∫—Ç–æ—Ä–∏–Ω–∞  
### –ü—Ä–æ–µ–∫—Ç –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ **–†–ê–ó–£–ú 2.0**

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

**Quiz** ‚Äî —ç—Ç–æ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –≤–∏–∫—Ç–æ—Ä–∏–Ω –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.  
–ò–≥—Ä–æ–∫–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç—ã, –ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –¥—Ä—É–∑–µ–π –∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç—å—Å—è, –∫—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ –æ—Ç–≤–µ—Ç–∏—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.  
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤–æ–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ GPT, —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ –∏ –≥–∏–±–∫—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—á–∫–æ–≤.

–°–µ—Ä–≤–µ—Ä —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç –ø–æ –∞–¥—Ä–µ—Å—É:  
üåê **http://89.223.70.57/**  

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –°–ª–æ–π | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |
|------|-------------|
| **Frontend** | React |
| **Backend** | Flask + Flask-SocketIO (eventlet) |
| **–ë–î** | MySQL (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) + Redis (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã) |
| **AI** | OpenAI / Gemini API (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤) |
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** | JWT (cookie-based) |
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** | Docker + Gunicorn |

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Quiz/
‚îÇ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db.py                # –†–∞–±–æ—Ç–∞ —Å MySQL
‚îÇ   ‚îú‚îÄ‚îÄ fake_db.py           # –ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ gpt.py               # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ OpenAI API
‚îÇ   ‚îú‚îÄ‚îÄ models.py            # Dataclasses: Player, Room, Question –∏ –¥—Ä.
‚îÇ   ‚îú‚îÄ‚îÄ redis_storage.py     # –†–∞–±–æ—Ç–∞ —Å Redis: –∫–æ–º–Ω–∞—Ç—ã, –∫–æ–¥—ã, –∏–≥—Ä–æ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ routes.py            # REST API: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∫–æ–º–Ω–∞—Ç—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ sockets.py           # Socket.IO ‚Äî –ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
‚îÇ
‚îú‚îÄ‚îÄ .env                     # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile               # Docker-–æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ run.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îî‚îÄ‚îÄ README.md
```

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1Ô∏è‚É£ –ß–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
docker build -t quiz-app .
docker run -d -p 5000:5000 --env-file .env quiz-app
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:  
**http://localhost:5000**

---

### 2Ô∏è‚É£ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
python -m venv venv
source venv/bin/activate  # (–∏–ª–∏ venv\Scripts\activate –Ω–∞ Windows)
pip install -r requirements.txt
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ `.env` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
```
JWT_SECRET_KEY=secret_key
REDIS_HOST=localhost
REDIS_PORT=6379
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=1234
DB_DATABASE=quiz
GPT_CATEGORY_ID=gpt-cat-id
API_KEY=your_openai_api_key
BASE_URL=https://api.openai.com/v1
```

#### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
python run.py
```

---

## üß† –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É  
‚úÖ –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤ –∑–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å  
‚úÖ –¢–∞–π–º–µ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤  
‚úÖ –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ GPT  
‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—à–ª—ã—Ö –∏–≥—Ä  

---

## üîå REST API (–æ—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|----------|
| `POST` | `/api/user/signup` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| `POST` | `/api/user/signin` | –í—Ö–æ–¥ –∏ –≤—ã–¥–∞—á–∞ JWT cookie |
| `POST` | `/api/user/logout` | –í—ã—Ö–æ–¥ |
| `GET`  | `/api/user/me` | –î–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `POST` | `/api/rooms/create` | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã |
| `POST` | `/api/rooms/join` | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É |
| `GET`  | `/api/categories/list` | –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π |
| `GET`  | `/api/rooms/list` | –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã |
| `GET`  | `/api/user/past_games` | –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

---

## ‚ö° Socket.IO —Å–æ–±—ã—Ç–∏—è

| –°–æ–±—ã—Ç–∏–µ | –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|--------------|-------------|
| `join_room` | –∫–ª–∏–µ–Ω—Ç ‚Üí —Å–µ—Ä–≤–µ—Ä | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ |
| `leave_room` / `disconnect` | –∫–ª–∏–µ–Ω—Ç ‚Üí —Å–µ—Ä–≤–µ—Ä | –í—ã—Ö–æ–¥ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã |
| `start_quiz` | –≤–ª–∞–¥–µ–ª–µ—Ü ‚Üí —Å–µ—Ä–≤–µ—Ä | –ù–∞—á–∞–ª–æ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã |
| `answer` | –∏–≥—Ä–æ–∫ ‚Üí —Å–µ—Ä–≤–µ—Ä | –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ |
| `next_question` | —Å–µ—Ä–≤–µ—Ä ‚Üí –≤—Å–µ | –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å |
| `update_leaderboard` | —Å–µ—Ä–≤–µ—Ä ‚Üí –≤—Å–µ | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã |
| `endOfGame` | —Å–µ—Ä–≤–µ—Ä ‚Üí –≤—Å–µ | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã |

---

## üßÆ –°–∏—Å—Ç–µ–º–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—á–∫–æ–≤

| –°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ | –û—á–∫–∏ |
|------------------|------|
| < 25% –≤—Ä–µ–º–µ–Ω–∏ | +60 |
| < 50% –≤—Ä–µ–º–µ–Ω–∏ | +35 |
| < 75% –≤—Ä–µ–º–µ–Ω–∏ | +20 |
| –û—Å—Ç–∞–ª—å–Ω—ã–µ | +10 |

---

## üóÑÔ∏è –•—Ä–∞–Ω–∏–ª–∏—â–∞

- **Redis** ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–≥—Ä–æ–≤—ã–µ –∫–æ–º–Ω–∞—Ç—ã, –∏–≥—Ä–æ–∫–∏, —Ç–∞–π–º–µ—Ä—ã)
- **MySQL** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –≤–æ–ø—Ä–æ—Å—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∏—Å—Ç–æ—Ä–∏—è –∏–≥—Ä
- **GPT** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

---

## üß† –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GPT

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å `id == GPT_CATEGORY_ID` —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –º–æ–¥–µ–ª—å **gemini-2.5-flash-lite**  
—á–µ—Ä–µ–∑ API, –ø–æ–ª—É—á–∞–µ—Ç JSON —Å–æ —Å–ø–∏—Å–∫–æ–º –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É `Question`.

---

## üß∞ Dockerfile

```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 5000

CMD ["gunicorn",      "-k", "eventlet",      "-w", "1",      "-b", "0.0.0.0:5000",      "--access-logfile", "-",      "--error-logfile", "-",      "--log-level", "info",      "run:app"]
```

---


## üß∞ –ê–≤—Ç–æ—Ä—ã –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏

- –ñ–∞—Ä–æ–≤ –î–∞–Ω–∏–ª
- –ö—É–∑–Ω–µ—Ü–æ–≤ –ü–µ—Ç—Ä
- –•–∞—Å–Ω—É–ª–∏–Ω –†–æ–º–∞–Ω
- –ß–µ—Ä–Ω–æ–≤ –ê—Ä—Å–µ–Ω–∏–π
